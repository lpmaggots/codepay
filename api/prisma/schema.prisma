generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id                String   @id @default(uuid())
  name              String
  email             String   @unique
  password          String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @default(now())

  accounts          Account[]
}

model Account {
  id                String        @id @default(uuid())
  number            String
  type              String
  balance           Float
  userId            String
  institutionId     String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @default(now())

  user              User          @relation(fields: [userId], references: [id])
  institution       Institution   @relation(fields: [institutionId], references: [id])
  transactions      Transaction[]
}

model Transaction {
  id                String   @id @default(uuid())
  type              String
  amount            Float
  description       String
  date              DateTime @default(now())
  accountId         String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @default(now())

  account           Account  @relation(fields: [accountId], references: [id])
}

model Institution {
  id                String    @id @default(uuid())
  ispb              String
  name              String
  code              String
  createdAt         DateTime @default(now())
  updatedAt         DateTime @default(now())
  
  accounts          Account[]
}